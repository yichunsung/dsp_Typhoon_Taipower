testdata <- iris[ - t_idx,]
View(traindata)
nnetM <- nnet(formula = Species ~ .,
linout = T,
size = 3,
decay = 0.001,
maxit = 1000,
trace = T,
data = traindata
)
plot.nnet(nnetM, wts.only = F)
#(4)預測
#test組執行預測
prediction <- predict(nnetM, testdata, type = 'class')
#預測結果
cm <- table(x = testdata$Species, y = prediction, dnn = c("實際", "預測"))
cm
?DMwR
nnetM <- nnet(formula = Species ~ .,
linout = T,
size = 12,
decay = 0.001,
maxit = 1000,
trace = T,
data = traindata
)
plot.nnet(nnetM, wts.only = F)
#(4)預測
#test組執行預測
prediction <- predict(nnetM, testdata, type = 'class')
#預測結果
cm <- table(x = testdata$Species, y = prediction, dnn = c("實際", "預測"))
cm
nnetM <- nnet(formula = Species ~ .,
linout = T,
size = ˇ,
decay = 0.001,
maxit = 1000,
trace = T,
data = traindata
)
#畫圖
plot.nnet(nnetM, wts.only = F)
nnetM <- nnet(formula = Species ~ .,
linout = T,
size = 3,
decay = 0.001,
maxit = 1000,
trace = T,
data = traindata
)
#畫圖
plot.nnet(nnetM, wts.only = F)
View(traindata)
install.packages("neuralnet")
#整理資料
data <- iris
data$setosa <- ifelse(data$Species == "setosa", 1, 0)
data$versicolor <- ifelse(data$Species == "versicolor", 1, 0)
data$virginica <- ifelse(data$Species == "virginica", 1, 0)
View(data)
f1 <- as.formula('setosa + versicolor + virginica  ~ Sepal.Length + Sepal.Width + Petal.Length + Petal.Width')
f1
bpn <- neuralnet(formula = f1, data = data, hidden = c(2,4),learningrate = 0.01)
library(neuralnet)
bpn <- neuralnet(formula = f1, data = data, hidden = c(2,4),learningrate = 0.01)
print(bpn)
plot(bpn)
prediction <- predict(bpn, testdata, type = 'class')
prediction <- predict(bpn, data, type = 'class')
prediction <- predict(nnetM, testdata, type = 'class')
nnetM
bpn
prediction <- predict(bpn, data)
pred <- compute(bpn, test[, 1:4])
pred <- compute(bpn, testdata[, 1:4])
pred
pred$net.result
df[grepl('0[01]:\\d{2}:\\d{2}',df$timedata),]
?grepl
class.ind(testdata$Species)
class.ind(testdata$Species)%>%head()
library(magrittr)
class.ind(testdata$Species)%>%head()
View(data)
View(df)
gelp
grep({/1}, df$id)
grep('/1', df$id)
grep('/a', df$id)
grep('/a', df$id)
typ_cwb_int <- read.csv("c://comp/dsp_Typhoon_Taipower/data/int_cwb_database.csv")
View(typ_cwb_int)
View(typ_cwb_int)
names(typ_cwb_int) <- c("year", # 年份
"id", # 編號
"c_name", # 中文名稱
"name", # English name
"life_period", # 生命週期
"center_lowest_pa", # 中心最低氣壓
"center_stronger_wind", # 中心最大風速
"strom_7_R", # 最大7級暴風半徑
"strom_10_R", # 最大10級暴風半徑
"warming_times" # 警報次數
)
View(typ_cwb_int)
View(typ_cwb_int)
typ_cwb_int[2]
typ_cwb_int[[5]]
typ_cwb_int <- subset(typ_cwb_int, typ_cwb_int$life_period != "--")
View(typ_cwb_int)
typ_cwb_int <- subset(typ_cwb_int, typ_cwb_int$life_period != "---")
typ_cwb_int$life_period[typ_cwb_int$life_period%%2]
typ_cwb_int$life_period[%%2]
typ_cwb_int$life_period[2]
which(typ_cwb_int$life_period%%2)
typ_cwb_int$life_period[[1]]
typ_cwb_int$life_period[[2]]
as.character(typ_cwb_int$life_period[[2]])
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[[(2*i)-1]]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[[(2*i)]]))
}
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[[(2*i)-1]]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[[2*i]]))
}
start_time
end_time <- c()
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[[(2*i)-1]]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[[2*i]]))
}
end_time
1556+1556
length(typ_cwb_int$life_period)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$year != "NA")
type_cwb_new <- cbind(type_cwb_new, start_time, end_time)
typ_cwb_new <- cbind(typ_cwb_new, start_time, end_time)
View(typ_cwb_int)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != "NA")
View(typ_cwb_int)
typ_cwb_int$year
View(typ_cwb_new)
nrow(typ_cwb_int)
nrow(typ_cwb_int)
length(start_time)
length(start_time)+length(end_time)
typ_cwb_new$life_period
summary(typ_cwb_new$life_period)
length(typ_cwb_new$life_period)
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)+1){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[[(2*i)-1]]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[[2*i]]))
}
1557+1557
nrow(typ_cwb_int)
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[(2*i)-1]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[2*i]))
}
start_time
typ_cwb_int$life_period[1]
typ_cwb_int$life_period[[1]]
typ_cwb_int[5][[1]]
typ_cwb_int[[5,1]]
typ_cwb_int[[1, 5]]
typ_cwb_int$life_period[1]
as.character(typ_cwb_int$life_period[1])
as.character(typ_cwb_int$life_period[2])
start_time[1:2]
start_time <- c()
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[(2*i)-1]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[2*i]))
}
2*3112-1
2*3112
2*1-1
2*2-1
2*4-1
2*3-1
3112/2
start_time <- c()
end_time <- c()
for(i in 1:length(typ_cwb_int$life_period)/2){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[(2*i)-1]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[2*i]))
}
start_time <- c()
end_time <- c()
for(i in 1:(length(typ_cwb_int$life_period)/2)){
start_time <- c(start_time, as.character(typ_cwb_int$life_period[(2*i)-1]))
end_time <- c(end_time, as.character(typ_cwb_int$life_period[2*i]))
}
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != "NA")
typ_cwb_new <- cbind(typ_cwb_new, start_time, end_time)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != "NA")
summary(typ_cwb_new)
summary(typ_cwb_new$id)
summary(typ_cwb_new$year)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id >= 0)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id == "NA")
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id ="NA")
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id =="NA")
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id ==NA)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id = NA)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != "NA")
typ_cwb_int[1]
typ_cwb_int[1,]
typ_cwb_int[2,]
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != NA)
typ_cwb_new <- subset(typ_cwb_int, typ_cwb_int$id != "NA")
typ_cwb_new <- data.frame()
typ_cwb_new <- data.frame()
for(i in 1:(nrow(typ_cwb_int)/2)){
typ_cwb_new <- rbind(typ_cwb_new, typ_cwb_int[(2*i-1),])
}
odd(1:10)
even
odd
odd(1)
typ_cwb_new<- rbind(typ_cwb_new, start_time, end_time)
warnings()
typ_cwb_new <- data.frame()
for(i in 1:(nrow(typ_cwb_int)/2)){
typ_cwb_new <- rbind(typ_cwb_new, typ_cwb_int[(2*i-1),])
}
typ_cwb_new<- cbind(typ_cwb_new, start_time, end_time)
View(typ_cwb_new)
testdf <- data.frame(col1=c(1:10), col2= c(11:20))
testdf
testdf <- data.frame(col1=c(2, 4, 6, 8, 10), col2= c(12, 14, 16, 18, 20))
testdf
col1=c(2, 4, 6, 8, 10)
col1
seq(2:length(typ_cwb_int), 2)
seq(2:length(typ_cwb_int))
seq(2:length(typ_cwb_int$life_period))
seq(2:length(typ_cwb_int$life_period),2)
seq(2,nrow(df), 2)
seq(2,nrow(testdf), 2)
seq(2,length(typ_cwb_int$life_period), 2)
seq(1,length(typ_cwb_int$life_period), 2)
typ_odd <- typ_cwb_int[seq(2,nrow(typ_cwb_int), 2),]
View(typ_odd)
typ_odd <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),]
View(typ_odd)
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),]
start_time <-  typ_cwb_int$life_period[seq(1,nrow(typ_cwb_int), 2)]
start_time
start_time <-  typ_cwb_int$life_period[[seq(1,nrow(typ_cwb_int), 2)]]
start_time <-  as.character(typ_cwb_int$life_period[seq(1,nrow(typ_cwb_int), 2)])
library(dplyr)
library(magrittr)
start_time <-  typ_cwb_int$life_period[seq(1,nrow(typ_cwb_int), 2)] %>% as.character()
end_time <- typ_cwb_int$life_period[seq(from = 1, to= nrow(typ_cwb_int), 2)] %>% as.character()
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
rbind(., start_time, end_time)
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
cbind(., start_time, end_time)
View(typ_cwb_new)
start_time <-  typ_cwb_int$life_period[seq(1,nrow(typ_cwb_int), 2)] %>%
as.character() %>% as.POSIXct(., "%Y/%m/%d %H:%M", tz = "GMT")
start_time
end_time <- typ_cwb_int$life_period[seq(from = 1, to= nrow(typ_cwb_int), 2)] %>%
as.character() %>% as.POSIXct(., "%Y/%m/%d %H:%M", tz = "GMT")
typ_cwb_new$life_period <- (typ_cwb_new$end_time - typ_cwb_new$start_time) %>% as.numeric()
typ_cwb_new$life_period <- (typ_cwb_new$end_time-typ_cwb_new$start_time) %>% as.numeric()
typ_cwb_new$end_time-typ_cwb_new$start_time
as.Date(typ_cwb_new$end_time)
typ_cwb_new$life_period <- (as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time))%>%
as.numeric()
View(typ_cwb_new)
as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time)
as.Date(typ_cwb_new$end_time[1]) - as.Date(typ_cwb_new$start_time[1])
as.Date(typ_cwb_new$end_time[1])
as.Date(typ_cwb_new$start_time[1])
end_time <- typ_cwb_int$life_period[seq(from = 2, to= nrow(typ_cwb_int), 2)] %>%
as.character() %>% as.POSIXct(., "%Y/%m/%d %H:%M", tz = "GMT")
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
cbind(., start_time, end_time)
typ_cwb_new$life_period <- (as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time))%>%
as.numeric()
typ_cwb_new$strom_7_R
typ_cwb_new$strom_7_R <- sub("---", replacement = 0, typ_cwb_new$strom_7_R)
typ_cwb_new$strom_7_R
typ_cwb_new$strom_7_R <- sub("---", replacement =as.numeric(0), typ_cwb_new$strom_7_R)
typ_cwb_new$strom_7_R
typ_cwb_new$strom_7_R <- sub("---", replacement =0, typ_cwb_new$strom_7_R) %>% as.numeric()
typ_cwb_new$strom_7_R
typ_cwb_new[4:5] <- sub("---", replacement =0, typ_cwb_new$strom_7_R) %>% as.numeric()
typ_cwb_new[4:5]
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
cbind(., start_time, end_time)
typ_cwb_new$life_period <- (as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time))%>%
as.numeric(
View(typ_cwb_new)
)
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
cbind(., start_time, end_time)
typ_cwb_new$life_period <- (as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time))%>%
as.numeric()
View(typ_cwb_new)
typ_cwb_new[8:10] <- sub("---", replacement =0, typ_cwb_new[8:10] ) %>% as.numeric()
typ_cwb_new[8:10]
typ_cwb_new <- typ_cwb_int[seq(1,nrow(typ_cwb_int), 2),] %>%
cbind(., start_time, end_time)
typ_cwb_new$life_period <- (as.Date(typ_cwb_new$end_time) - as.Date(typ_cwb_new$start_time))%>%
as.numeric()
typ_cwb_new[8:10]
sub("---", replacement =0, typ_cwb_new[8:10])
typ_cwb_new[8:10]
sub("---", replacement =0, typ_cwb_new[8:10])
sub("---", replacement =0, typ_cwb_new[[8:10]])
typ_cwb_new$strom_10_R <- sub("---", replacement =0, typ_cwb_new$strom_10_R) %>% as.numeric()
typ_cwb_new$warming_times <- sub("---", replacement =0, typ_cwb_new$warming_times) %>% as.numeric()
View(typ_cwb_new)
write.csv(typ_cwb_new, "c://comp/dsp_Typhoon_Taipower/data/new_cwb_database.csv")
library(dplyr)
subset()
subset(typ_cwb_new, typ_cwb_new$c_name =="蘇迪勒")
typ_cwb_new$strom_7_R <- sub("---", replacement =0, typ_cwb_new$strom_7_R) %>% as.numeric()
subset(typ_cwb_new, typ_cwb_new$c_name =="蘇迪勒")
write.csv(typ_cwb_new, "c://comp/dsp_Typhoon_Taipower/data/new_cwb_database.csv")
subset(typ_cwb_new, typ_cwb_new$c_name =="莫蘭蒂")
subset(typ_cwb_new, typ_cwb_new$c_name =="馬勒卡")
typ201513 <- read.table("c://comp/dsp_Typhoon_Taipower/data/bep132015.dat")
typ201513 <- read.table("c://comp/dsp_Typhoon_Taipower/data/bep132015.dat", header=TRUE, skip=3)
typ201513 <- read.table("c://comp/dsp_Typhoon_Taipower/data/bep132015.dat", header=F)
typ201513 <- read.table("c://comp/dsp_Typhoon_Taipower/data/bep132015.dat", header=F)
View(typ201513)
typhoon_path_2014 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/jp_typhoon_table2014.csv")
View(typhoon_path_2014)
typhoon_path_2015 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/jp_typhoon_table2015.csv")
typhoon_path_2016 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/jp_typhoon_table2016.csv")
events <- read.csv("c://comp/dsp_Typhoon_Taipower/data/events_imfor.csv")
View(events)
?inner_join
inner_join(events, typhoon_path_2014, by = events$"typhoon_1_name")
inner_join(events, typhoon_path_2014, by = "typhoon_1_name")
inner_join(events, typhoon_path_2014)
inera <- inner_join(events, typhoon_path_2014)
View(inera)
event_single <- events[-8]
View(event_single)
View(events)
View(event_single)
event_single <- events[-8,]
View(event_single)
names(event_single)[3] <- "name"
inera <- inner_join(events, typhoon_path_2014, by = "name")
inera <- inner_join(event_single, typhoon_path_2014, by = "name")
View(inera)
account_number <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv")
account_number <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv")
View(account_number)
account_number <- read.table("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.txt")
View(account_number)
account_number <- read.table("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.txt", sep = ",")
account_number <- read.table("c://comp/dsp_Typhoon_Taipower/data/2017_account_number.txt")
account_number <- read.table("c://comp/dsp_Typhoon_Taipower/data/2017_account_number.csv")
View(account_number)
account_number <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2017_account_number.csv")
account_number <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2017_account_number.csv",header = TRUE)
account_number <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv",header = TRUE)
View(account_number)
account_number <- account_number[-1,]
View(account_number)
account_number_2016 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv",header = TRUE)
account_number_2016 <- account_number_2016[-1,]
View(account_number_2016)
account_number_2016 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv",header = TRUE)
account_number_2016 <- account_number_2016[-1,1:7]
View(account_number_2016)
Tai_train_data <- read.csv("c://comp/dsp_Typhoon_Taipower/data/train.csv")
View(Tai_train_data)
View(account_number_2016)
paste(Tai_train_data$CityName, Tai_train_data$TownName, Tai_train_data$VilName, sep = "") %>%
rbind(Tai_train_data, .)
paste(Tai_train_data$CityName, Tai_train_data$TownName, Tai_train_data$VilName, sep = "") %>%
cbind(Tai_train_data, .)
Tai_train_data <- paste(Tai_train_data$CityName, Tai_train_data$TownName, Tai_train_data$VilName, sep = "") %>%
cbind(Tai_train_data, .)
View(Tai_train_data)
names(Tai_train_data)[13] <- "area"
View(Tai_train_data)
account_number_2016 <- paste(account_number_2016$site_id, account_number_2016$village, sep = "") %>%
cbind(account_number_2016, .)
names(account_number_2016)[8] <- "area"
combineDF <- inner_join(Tai_train_data, account_number_2016, by = "area")
View(combineDF)
combineDF <- merge(Tai_train_data, account_number_2016, by.x="area", by.y="area", all.x=TRUE)
View(combineDF)
sub("臺", "台", Tai_train_data)
sub("臺", "台", account_number_2016)
View(account_number_2016)
account_number_2016 <- sub("臺", "台", account_number_2016)
account_number_2016 <- read.csv("c://comp/dsp_Typhoon_Taipower/data/2016_account_number.csv",header = TRUE)
account_number_2016 <- account_number_2016[-1,1:7]
account_number_2016 <- paste(account_number_2016$site_id, account_number_2016$village, sep = "") %>%
cbind(account_number_2016, .)
names(account_number_2016)[8] <- "area"
account_number_2016$area <- sub("臺", "台", account_number_2016$area)
View(account_number_2016)
combineDF <- merge(Tai_train_data, account_number_2016, by.x="area", by.y="area", all.x=TRUE)
View(combineDF)
sum(account_number_2016$household_no)
sum(as.numeric(account_number_2016$household_no))
sum(as.numeric(Tai_train_data$Hagibis))
View(typ_cwb_new)
View(Tai_train_data)
View(event_single)
tyList <- merge(event_single, typ_cwb_new, by.x="name", by.y="name", all.x=TRUE)
View(tyList)
combineDF$Fung.wong/combineDF$household_no
View(combineDF)
as.numeric(combineDF$Fung.wong)/as.numeric(combineDF$household_no)
FWTY <- as.numeric(combineDF$Fung.wong)/as.numeric(combineDF$household_no)
FWTY<- subset(FWTY, FWTY!=0)
FWTY
combineDF <- cbind(combineDF, FWTY)
FWTY <- as.numeric(combineDF$Fung.wong)/as.numeric(combineDF$household_no)
combineDF <- cbind(combineDF, FWTY)
View(combineDF)
combineDF_FWTY<- subset(combineDF, combineDF$FWTY!=0)
View(combineDF_FWTY)
642/1142
FWTY <- as.numeric(as.vector(combineDF$Fung.wong))/as.numeric(as.vector(combineDF$household_no))
combineDF <- cbind(combineDF, FWTY)
combineDF_FWTY<- subset(combineDF, combineDF$FWTY!=0)
D_train <- read.csv("C:/Machine-Learing-Notebook/data/Digit_Recognizer/train.csv")
View(D_train)
dim(D_train)
obs.matrix <- matrix(unlist(D_train[1, -1]), # ignore 'label'
nrow = 28,
byrow=T)
str(obs.matrix)
image(obs.matrix,
col=grey.colors(255))
D_train[1, -1]
D_train[1, ]
D_train[1, -1]
# 由於原本的圖是倒的，因此寫一個翻轉的函式：
# rotates the matrix
rotate <- function(matrix){
t(apply(matrix, 2, rev))
}
# 畫出第1筆~第8筆資料的圖
par(mfrow=c(2,4))
for(x in 1:8){
obs.matrix <- matrix(unlist(train[x, -1]), # ignore 'label'
nrow = 28,
byrow=T)
image(rotate(obs.matrix),
col=grey.colors(255),
xlab=paste("Label", train[x, 1], sep=": "),
cex.lab = 1.5
)
}
# 由於原本的圖是倒的，因此寫一個翻轉的函式：
# rotates the matrix
rotate <- function(matrix){
t(apply(matrix, 2, rev))
}
# 畫出第1筆~第8筆資料的圖
par(mfrow=c(2,4))
for(x in 1:8){
obs.matrix <- matrix(unlist(D_train[x, -1]), # ignore 'label'
nrow = 28,
byrow=T)
image(rotate(obs.matrix),
col=grey.colors(255),
xlab=paste("Label", D_train[x, 1], sep=": "),
cex.lab = 1.5
)
}
par(mfrow=c(2,4))
?par
?t
testdf
t(testdf)
t(testdf, 2, rev)
install.packages("mxnet")
cran <- getOption("repos")
cran["dmlc"] <- "https://apache-mxnet.s3-accelerate.dualstack.amazonaws.com/R/CRAN/"
options(repos = cran)
install.packages("mxnet")
install.packages("mxnet")
install.packages("mxnet")
install.packages("mxnet")
library(mxnet)
require(mxnet)
data <- mx.symbol.Variable("data")
install.packages("mxnet")
library(mxnet)
install.packages("drat", repos="https://cran.rstudio.com")
drat:::addRepo("dmlc")
install.packages("mxnet")
require(mxnet)
